@page "/"
@using AKucher.Tasks.Module.BusinessObjects
@using DevExpress.Xpo
@using DevExpress.Xpo.DB;

<PageTitle>Index</PageTitle>

<h1>Hello, world!</h1>

@if (Tasks is not null)
{
    @foreach (var task in Tasks)
    {
        <br />
        <span>@task.Index</span>
    }
}

<SurveyPrompt Title="How is Blazor working for you?" />

@code {
    List<TaskObject> Tasks { get; set; }

    protected override void OnInitialized()
    {
        Tasks = new List<TaskObject>();
        using (var uow = new UnitOfWork())
        {
            Tasks = uow.Query<TaskObject>().ToList();
        }

        base.OnInitialized();
    }
}